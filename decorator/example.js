
function init() {
  // --- Example with an array of Polylines ---
  var multiCoords1 = [

  [[-23.007639, -43.310359],[-23.012166, -43.308384],[-23.010107, -43.304690],[-23.008484, -43.298801],[-23.010301, -43.296672],[-22.983902, -43.227030]]
/*
  [[-22.9832, -43.204192, 24.5],[-22.983172,-43.204751,22.8],[-22.983167,-43.204848,22.5],[-22.983062,-43.204841,22.3],[-22.982665,-43.204814,21.9],[-22.982223,-43.204785,21.3],
  [-22.982097,-43.204776,21.2],[-22.981695,-43.204749,20.6],[-22.981559,-43.20474,20.2],[-22.981057,-43.204707,18.5],[-22.980259,-43.204653,14.2],[-22.98018,-43.204648,13.5]
  ,
  [-22.979792,-43.203336,6.6],[-22.979596,-43.202711,6],[-22.979569,-43.202631,6],[-22.979537,-43.202536,6],[-22.979066,-43.200724,6],[-22.978807,-43.199897,6],[-22.978653,-43.199537,6],
  [-22.978608,-43.199343,6],[-22.978479,-43.199023,7.1],[-22.97831,-43.198741,8.2],[-22.978165,-43.198611,8.7],[-22.977942,-43.198501,9.2],[-22.977595,-43.198355,10.2],
  [-22.977141,-43.198309,12.8],[-22.976933,-43.198194,14],[-22.976843,-43.198072,14.3],[-22.976782,-43.19791,14.5],[-22.976774,-43.197711,15.1],[-22.976773,-43.197368,19.6],
  [-22.976843,-43.197062,25.8],[-22.976955,-43.196572,38.9],[-22.977,-43.196177,49.8],[-22.976983,-43.195744,59.5],[-22.976767,-43.194732,64.6],[-22.976744,-43.194517,62.7],
  [-22.976792,-43.194349,61.6],[-22.977019,-43.193806,53.8],[-22.977065,-43.193706,52.5],[-22.977431,-43.19286,42.4],[-22.977496,-43.192718,41.5],[-22.977708,-43.191708,34.4],
  [-22.977812,-43.191252,32.9],[-22.977964,-43.190597,30.6],[-22.978152,-43.189707,29.3],[-22.978252,-43.189201,29.8],[-22.97826,-43.189156,29.9],[-22.978286,-43.189024,30],
  [-22.978334,-43.188793,29],[-22.97776,-43.188542,28.1],[-22.977184,-43.188313,25.2],[-22.976764,-43.1881,20.8],[-22.976381,-43.187875,20.4]]
*/
  /*
      [[47.5468, -0.7910], [48.8068, -0.1318], [49.1242, 1.6699], [49.4966, 3.2958], [51.4266, 2.8564], [51.7542, 2.1093]],
      [[48.0193, -2.8125], [46.3165, -2.8564], [44.9336, -1.0107], [44.5278, 1.5820], [44.8714, 3.7353], [45.8287, 5.1855], [48.1953, 5.1416]],
      [[45.9205, 0.4394], [46.7699, 0.9228], [47.6061, 2.5488], [47.7540, 3.3837]]
  */
  ];

  var xroute = [];
  for(var i =0; i< multiCoords1[0].length; i++) {
    xroute.push([multiCoords1[0][i][0],multiCoords1[0][i][1]]);
  }

  multiCoords1 = [ xroute ];

    var map = L.map('map', {
        center: multiCoords1[0][0], //[-22.9832, -43.204192],
        zoom: 15,
        layers: [
            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            })
        ]
    });

    // --- Simple arrow ---
    var arrow = L.polyline([[57, -19], [60, -12]], {}).addTo(map);
    var arrowHead = L.polylineDecorator(arrow, {
        patterns: [
            {offset: '100%', repeat: 0, symbol: L.Symbol.arrowHead({pixelSize: 15, polygon: false, pathOptions: {stroke: true}})}
        ]
    }).addTo(map);

    // --- Polygon, with an inner ring ---
    var polygon = L.polygon([[[54, -6], [55, -7], [56, -2], [55, 1], [53, 0]], [[54, -3], [54, -2], [55, -1], [55, -5]]], {color: "#ff7800", weight: 1}).addTo(map);
    var pd = L.polylineDecorator(polygon, {
        patterns: [
            {offset: 0, repeat: 10, symbol: L.Symbol.dash({pixelSize: 0})}
        ]
    }).addTo(map);

    // --- Multi-pattern without Polyline ---
    var pathPattern = L.polylineDecorator(
        [ [ 49.543519, -12.469833 ], [ 49.808981, -12.895285 ], [ 50.056511, -13.555761 ], [ 50.217431, -14.758789 ], [ 50.476537, -15.226512 ], [ 50.377111, -15.706069 ], [ 50.200275, -16.000263 ], [ 49.860606, -15.414253 ], [ 49.672607, -15.710152 ], [ 49.863344, -16.451037 ], [ 49.774564, -16.875042 ], [ 49.498612, -17.106036 ], [ 49.435619, -17.953064 ], [ 49.041792, -19.118781 ], [ 48.548541, -20.496888 ], [ 47.930749, -22.391501 ], [ 47.547723, -23.781959 ], [ 47.095761, -24.941630 ], [ 46.282478, -25.178463 ], [ 45.409508, -25.601434 ], [ 44.833574, -25.346101 ], [ 44.039720, -24.988345 ] ],
        {
            patterns: [
                { offset: 12, repeat: 25, symbol: L.Symbol.dash({pixelSize: 10, pathOptions: {color: '#f00', weight: 2}}) },
                { offset: 0, repeat: 25, symbol: L.Symbol.dash({pixelSize: 0}) }
            ]
        }
    ).addTo(map);

    // --- Markers proportionnaly located ---
    var markerLine = L.polyline([[58.44773, -28.65234], [52.9354, -23.33496], [53.01478, -14.32617], [58.1707, -10.37109], [59.68993, -0.65918]], {}).addTo(map);
    var markerPatterns = L.polylineDecorator(markerLine, {
        patterns: [
            { offset: '5%', repeat: '10%', symbol: L.Symbol.marker()}
        ]
    }).addTo(map);

    // --- Example with a rotated marker ---
    var pathPattern = L.polylineDecorator(
        [ [ 42.9, -15 ], [ 44.18, -11.4 ], [ 45.77, -8.0 ], [ 47.61, -6.4 ], [ 49.41, -6.1 ], [ 51.01, -7.2 ] ],
        {
            patterns: [
                { offset: 0, repeat: 10, symbol: L.Symbol.dash({pixelSize: 5, pathOptions: {color: '#000', weight: 1, opacity: 0.2}}) },
                { offset: '16%', repeat: '33%', symbol: L.Symbol.marker({rotate: true, markerOptions: {
                    icon: L.icon({
                        iconUrl: 'icon_plane.png',
                        iconAnchor: [16, 16]
                    })
                }})}
            ]
        }
    ).addTo(map);



    var plArray = [];
    for(var i=0; i<multiCoords1.length; i++) {
        plArray.push(L.polyline(  multiCoords1[i]  ).addTo(map));
    }
    L.polylineDecorator(multiCoords1, {
        patterns: [
            {offset: 25, repeat: 50, symbol: L.Symbol.arrowHead({pixelSize: 15, pathOptions: {fillOpacity: 1, weight: 0}})}
        ]
    }).addTo(map);
}
